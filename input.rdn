forEach = f(list, m) {
  local (n = length(list)) {
    local loop(i = 0) {
      if i < n then {
        m(list[i], i);
        loop(i + 1);
      };
    };
  };
};

filterByRegex = function(list, rx) {
  a = [];
  forEach(list, f(e) {
    if e match rx then push(e, a);
  });
  (a);
};

test = ["12F4", "Z231", "64AE"];
hexOnly = |^[0-9abcdef]+$|i;

test = filterByRegex(test, hexOnly);
print(test); // would output "12F4", "64AE"

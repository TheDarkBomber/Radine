macro-env xret return @(macro-env#FUNC);

declare: lul;

foo = f: xret {
  print("foo");
  if !lul then return "bar";
  print("far"); // never reached if lul is false
};

print(foo());
lul = true;
foo();
